{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;AAAsC;AACtC;AACA;AACA,8BAA8B,iDAAU;AACxC;AACA;AACA;AACA,2CAA2C,iDAAU;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AAIE;;;;;;;;;;;;;;;;;;AC7CwD;AACxB;AACS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iDAAU;AAC5C;AACA;AACA;AACA,eAAe,MAAM,kCAAkC,iDAAU;AACjE;AACA;AACA;AACA;AACA,QAAQ,0DAAW;AACnB;AACA,YAAY,iDAAQ;AACpB,gBAAgB,0CAAG;AACnB;AACA,oBAAoB,4DAAa;AACjC;AACA,iBAAiB;AACjB,wBAAwB;AACxB;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AAC6B;;;;;;;;;;;;;;;ACpC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,eAAe;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AAC2B;;;;;;;;;;;;;;;;ACvD3B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC1C,mBAAmB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC5C,KAAK;AACL;AACA,gBAAgB,OAAO,KAAK,KAAK,GAAG,KAAK;AACzC,iBAAiB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC1C,KAAK;AACL;AACA,gBAAgB,OAAO,KAAK,KAAK,GAAG,KAAK;AACzC,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB,OAAO,KAAK,KAAK,GAAG,KAAK;AACzC,iBAAiB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC1C,KAAK;AACL;AACA,iBAAiB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC1C,KAAK;AACL;AACA,mBAAmB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC5C,oBAAoB,OAAO,KAAK,KAAK,GAAG,KAAK;AAC7C;AACA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C,wBAAwB,gBAAgB;AACxC;AACA;AAIE;;;;;;;;;;;;;;;;ACzCoC;AACtC;AACA,gDAAgD,iDAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iDAAU;AACxC;AACA;AACA;AACA,gBAAgB,gCAAgC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,WAAW;AAC/F,qFAAqF,WAAW;AAChG;AACA,4FAA4F,WAAW;AACvG;AACA;AACA;AACA;AAC2B;;;;;;;;;;;;;;;;;AC5BW;AACtC;AACA,gDAAgD,iDAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,8BAA8B,iDAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kBAAkB,GAAG,wCAAwC;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iDAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,WAAW;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AAIE;;;;;;;;;;;;;;;;AChFkD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA,kHAAkH,IAAI;AACtH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mEAAgB;AAC5B;AACA,KAAK;AACL;AACA;AAC4B;;;;;;;;;;;;;;;;AC3BwB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,YAAY;AACnG;AACA;AACA;AACA,IAAI,mEAAiB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC0B;;;;;;;;;;;;;;;;;;;AClC6B;AACtB;AACU;AAC3C;AACA;AACA,IAAI,sEAAgB;AACpB,IAAI,gDAAO,CAAC,0CAAG;AACf;AACA,6BAA6B,iDAAU;AACvC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACuB;;;;;;;;;;;;;;;;;;;;;AChB2C;AACR;AACxB;AACS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,sCAAsC;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAqB;AACvC,kBAAkB,iEAAqB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sDAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iEAAqB,KAAK,iEAAqB;AAC5D;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iDAAU;AAC5C;AACA;AACA;AACA,eAAe,MAAM,kCAAkC,iDAAU;AACjE;AACA;AACA;AACA;AACA,QAAQ,0DAAW;AACnB;AACA,YAAY,iDAAQ;AACpB,gBAAgB,0CAAG;AACnB;AACA,oBAAoB,4DAAa;AACjC;AACA,iBAAiB;AACjB,wBAAwB;AACxB;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AAKE;;;;;;;;;;;;;;;;;;AC/F4C;AACoB;AACI;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6FAA6F,cAAc;AAC3G;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kBAAkB,8CAAQ;AAC1B,KAAK;AACL;AACA;AACA;AACA,kBAAkB,+CAAS;AAC3B,KAAK;AACL;AACA;AACA;AACA,kBAAkB,6DAAoB;AACtC,KAAK;AACL;AACA;AACA;AACA,kBAAkB,4DAAe;AACjC,KAAK;AACL;AACA;AACA;AACA,kBAAkB,gEAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA,qDAAqD,uDAAc;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AAC0B;;;;;;;;;;;;;;;;;ACrG1B,WAAW,mBAAmB;AACY;AACW;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAW;AACnB;AACA,YAAY,yDAAW;AACvB;AACA,gBAAgB,uDAAa;AAC7B,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AAC4B;;;;;;;;;;;;;;;ACxB5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;;;;;AC7C0C;AACW;AACd;AACvC;AACA;AACA;AACA;AACA;AACA,kCAAkC,iDAAU;AAC5C;AACA;AACA;AACA,eAAe,WAAW,kCAAkC,iDAAU;AACtE;AACA,QAAQ,qDAAW;AACnB;AACA,YAAY,yDAAW;AACvB;AACA,gBAAgB,uDAAa;AAC7B,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AAC2B;;;;;;;;;;;;;;;;;;;;ACxB4B;AACF;AACF;AACA;AACD;AACD;AACH;AACP;AACvC;AACA,kEAAkB;AAClB;AACA,QAAQ,gEAAe;AACvB,6BAA6B,iDAAU;AACvC,QAAQ,iEAAgB;AACxB,KAAK;AACL,IAAI,kEAAsB;AAC1B;AACA;AACA,oEAAmB;AACnB,IAAI,8DAAgB;AACpB,IAAI,kEAAsB;AAC1B;AACA;AACA,6DAAiB;AACjB,4BAA4B,iDAAU;AACtC,IAAI,iEAAgB;AACpB,CAAC;;;;;;;;;;;;;;;;AC1B2C;AAC5C;AACA;AACA;AACA;AACA;AACA,6CAA6C,iDAAU;AACvD;AACA;AACA;AACA;AACA,gCAAgC,0CAAG;AACnC;AACA;AACA;AACA;AAC0B;;;;;;;;;;;;;;;;;AChBe;AACY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,qDAAW;AACnB;AACA,YAAY,wDAAU;AACtB;AACA,gBAAgB,uDAAa;AAC7B,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AAC6B;;;;;;;;;;;;;;;ACrB7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;;;;;AC7CgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0CAAG;AACxB;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,0CAAG;AACxB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,0CAAG,qBAAqB,EAAE,QAAQ;AAC5D,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKE;;;;;;;;;;;;;;;;ACnEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,KAAK;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoC;;;;;;;;;;;;;;;ACrBpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,YAAY;AAChF;AACA;AACA;AACA;AACA;AACA;AACgC;;;;;;;;;;;;;;;;ACnBhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,2EAA2E,KAAK;AAChF;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,mDAAmD,qCAAqC;AACxF;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA,mDAAmD,yCAAyC;AAC5F;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AAIE;;;;;;;;;;;;;;;;AC5DF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,eAAe;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,eAAe;AACpE;AACA;AACA;AACA;AAC6B;;;;;;;UC5C7B;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;ACNqD;AACE;AACJ;AACA;AACE;AACtB;AACW;AACf;AACH;AACS;AACjC;AACA,gDAAK;AACL;AACA,gDAAO,CAAC,0CAAG;AACX;AACA,IAAI,oEAAkB;AACtB,CAAC;AACD;AACA,kEAAiB;AACjB;AACA,oEAAmB;AACnB;AACA,QAAQ,kEAAgB;AACxB;AACA,CAAC;AACD;AACA,sEAAoB,SAAS","sources":["webpack:///./src/api.js","webpack:///./src/comment-form.js","webpack:///./src/comment-list.js","webpack:///./src/const.js","webpack:///./src/effect-list.js","webpack:///./src/effects.js","webpack:///./src/picture-list.js","webpack:///./src/preview-modal.js","webpack:///./src/start.js","webpack:///./src/upload-form.js","webpack:///./src/upload-modal.js","webpack:///./src/user/login-form.js","webpack:///./src/user/login-modal.js","webpack:///./src/user/logout.js","webpack:///./src/user/main.js","webpack:///./src/user/page-header.js","webpack:///./src/user/signup-form.js","webpack:///./src/user/signup-modal.js","webpack:///./src/user/user-api.js","webpack:///./src/user/util.js","webpack:///./src/user/validation.js","webpack:///./src/validation.js","webpack:///./src/zoom.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./src/main.js"],"sourcesContent":["import {AppStorage} from './const.js';\r\n\r\nconst getToken = () => {\r\n    if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)){\r\n        return;\r\n    }\r\n\r\n    return JSON.parse(localStorage.getItem(AppStorage.ACCESS_TOKEN)).token;\r\n}\r\n\r\nconst getData = (url, onSuccess, onFail) => {\r\n    const token = getToken();\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('GET', url);\r\n    xhr.setRequestHeader('Authorization', `Basic ${btoa(token + ':')}`);\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if (xhr.status === 200) {\r\n            onSuccess(xhr.response);\r\n        }\r\n    });\r\n\r\n    xhr.send();\r\n}\r\n\r\nconst sendData = (url, onSuccess, onFail, body) => {\r\n    const token = getToken();\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', url);\r\n    xhr.setRequestHeader('Authorization', `Basic ${btoa(token + ':')}`);\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if (xhr.status === 201) {\r\n            onSuccess();\r\n        }\r\n    });\r\n\r\n    xhr.send(body);\r\n}\r\n\r\nexport {\r\n    getData,\r\n    sendData\r\n};\r\n","import {blockButton, unblockButton} from './user/util.js';\r\nimport {sendData} from './api.js';\r\nimport {AppStorage, Url} from './const.js';\r\n\r\nconst commentFormElement = document.querySelector('#comment-form');\r\nconst  submitBtnElement = commentFormElement.querySelector('[type=submit]');\r\n\r\nconst setCommentFormSabmit = (onSuccess, onFail) => {\r\n    commentFormElement.addEventListener('submit', (evt) => {\r\n        evt.preventDefault();\r\n\r\n        if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)) {\r\n            return;\r\n        }\r\n\r\n        const {user} = JSON.parse(localStorage.getItem(AppStorage.ACCESS_TOKEN));\r\n\r\n        const formData = new FormData(commentFormElement);\r\n        formData.set('user_id', user.id);\r\n\r\n        blockButton(submitBtnElement, 'Отправка');\r\n        window.setTimeout(() => {\r\n            sendData(\r\n                Url.COMMENT.POST,\r\n                () => {\r\n                    unblockButton(submitBtnElement);\r\n                    onSuccess();\r\n                },\r\n                () => {},\r\n                formData\r\n            );\r\n        }, 2000);\r\n        console.log(1);\r\n    });\r\n};\r\n\r\nexport {setCommentFormSabmit}\r\n","const totalCommentCountElement = document.querySelector('.comments-count');\r\nconst renderedCommentCountElement = document.querySelector('.comments-count--rendered');\r\nconst showMoreButtonElement = document.querySelector('.social__comments-loader');\r\nconst commentListElement = document.querySelector('.social__comments');\r\nconst commentTemlate = document.getElementById('comment')\r\n    .content\r\n    .querySelector('.social__comment');\r\n\r\nconst COMMENT_COUNT_PER_STEP = 5;\r\n\r\nconst setLoaderClick = function (comments) {\r\n    if (this.onLoaderClick !== undefined) {\r\n        showMoreButtonElement.removeEventListener('click', this.onLoaderClick);\r\n    }\r\n\r\n    this.onLoaderClick = () => {\r\n        renderComments(comments, renderedCommentCount, renderedCommentCount + COMMENT_COUNT_PER_STEP);\r\n        renderedCommentCount += COMMENT_COUNT_PER_STEP;\r\n        if (renderedCommentCount >= comments.length) {\r\n            showMoreButtonElement.classList.add('hidden');\r\n        }\r\n    };\r\n\r\n    let renderedCommentCount = 5;\r\n    showMoreButtonElement.addEventListener('click', this.onLoaderClick);\r\n}\r\n\r\nconst renderComments = (comments, from, to) => {\r\n    for (const {message, user} of comments.slice(from, to)) {\r\n        const commentElement = commentTemlate.cloneNode(true);\r\n        commentElement.querySelector('.social__text').textContent = message;\r\n        commentElement.querySelector('.social__picture').setAttribute('src', user.avatar);\r\n        commentListElement.append(commentElement);\r\n        renderedCommentCountElement.textContent = String((+renderedCommentCountElement.textContent) + 1);\r\n    }\r\n};\r\n\r\nconst renderCommentList = (comments) => {\r\n    commentListElement.innerHTML = '';\r\n\r\n    const to = Math.min(comments.length, COMMENT_COUNT_PER_STEP);\r\n\r\n    renderComments(comments, 0, to);\r\n    totalCommentCountElement.textContent = String(comments.length);\r\n    renderedCommentCountElement.textContent = String(to);\r\n\r\n    if (comments.length > COMMENT_COUNT_PER_STEP) {\r\n        showMoreButtonElement.classList.remove('hidden');\r\n    } else {\r\n        showMoreButtonElement.classList.add('hidden');\r\n    }\r\n\r\n    setLoaderClick.call(renderCommentList, comments);\r\n};\r\n\r\nexport {renderCommentList};\r\n","const scheme = 'http';\r\nconst host = 'localhost';\r\nconst port = '80';\r\n\r\nconst Url = {\r\n    ACCESS_TOKEN: {\r\n        POST: `${scheme}://${host}:${port}/token`,\r\n        DELETE: `${scheme}://${host}:${port}/logout/`\r\n    },\r\n    COMMENT: {\r\n        GET: `${scheme}://${host}:${port}/comment`,\r\n        POST: `${scheme}://${host}:${port}/comment`\r\n    },\r\n    EFFECT: {\r\n        GET: `${scheme}://${host}:${port}/effect`\r\n    },\r\n    LIKE: {\r\n        POST: null,\r\n        DELETE: null\r\n    },\r\n    PICTURE: {\r\n        GET: `${scheme}://${host}:${port}/picture`,\r\n        POST: `${scheme}://${host}:${port}/picture`\r\n    },\r\n    USER: {\r\n        POST: `${scheme}://${host}:${port}/user`\r\n    },\r\n    UPLOAD: {\r\n        AVATAR: `${scheme}://${host}:${port}/uploads/avatars/`,\r\n        PICTURE: `${scheme}://${host}:${port}/uploads/pictures/`\r\n    }\r\n};\r\n\r\nconst AppStorage = {\r\n    ACCESS_TOKEN: `gallery_${btoa('token')}`,\r\n    EFFECTS: `gallery_${btoa('effects')}`\r\n}\r\n\r\nexport {\r\n    Url,\r\n    AppStorage,\r\n};\r\n","import {AppStorage} from './const.js';\r\n\r\nconst EFFECTS = JSON.parse(localStorage.getItem(AppStorage.EFFECTS));\r\nconst effectListElement = document.querySelector('.effects__list');\r\nconst effectTemlate = document.getElementById('effect-item')\r\n    .content\r\n    .querySelector('.effects__item');\r\n\r\nconst renderEffectsList = () => {\r\n    if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)) {\r\n        return;\r\n    }\r\n\r\n    for (const {name: effectName, id: effectId} of EFFECTS) {\r\n        const effectElement = effectTemlate.cloneNode(true);\r\n\r\n        if (effectName === 'none') {\r\n            effectElement.querySelector('.effects__radio').setAttribute('checked', '');\r\n        }\r\n\r\n        effectElement.querySelector('.effects__radio').setAttribute('id', `effect-${effectName}`);\r\n        effectElement.querySelector('.effects__label').setAttribute('for', `effect-${effectName}`);\r\n        effectElement.querySelector('.effects__radio').setAttribute('value', effectId);\r\n        effectElement.querySelector('.effects__preview').classList.add(`effects__preview--${effectName}`);\r\n        effectListElement.append(effectElement);\r\n    }\r\n};\r\n\r\nexport {renderEffectsList};\r\n","import {AppStorage} from './const.js';\r\n\r\nconst EFFECTS = JSON.parse(localStorage.getItem(AppStorage.EFFECTS));\r\nconst effectLevelElement = document.querySelector('.effect-level')\r\nconst effectLevelSliderElement = effectLevelElement.querySelector('.effect-level__slider');\r\nconst effectLevelValueElement = effectLevelElement.querySelector('.effect-level__value');\r\nconst previewImgElement = document.querySelector('.img-upload__preview img');\r\n\r\nconst NONE_EFFECT_KEY = 'none';\r\n\r\nif (noUiSlider) {\r\n    noUiSlider.create(effectLevelSliderElement, {\r\n        range: {\r\n            min: 0,\r\n            max: 100\r\n        },\r\n        start: 50,\r\n        step: 1,\r\n        connect: 'lower',\r\n        format: {\r\n            to: function (value) {\r\n                if (Number.isInteger(value)) {\r\n                    return value.toFixed(0);\r\n                }\r\n                return value.toFixed(1);\r\n            },\r\n            from: function (value) {\r\n                return parseFloat(value);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nconst onSliderUpdate = (_, handle, unencoded) => {\r\n    if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)) {\r\n        return;\r\n    }\r\n\r\n    const effectName = document.querySelector('[name=effect_id]:checked').getAttribute('id').split('-')[1];\r\n    const effect = EFFECTS.find(effect => effect.name === effectName);\r\n\r\n    if (effectName !== NONE_EFFECT_KEY) {\r\n        const filterValue = `${effect.css_filter}(${unencoded[handle] + (effect.unit ?? '')})`;\r\n        effectLevelValueElement.setAttribute('value', unencoded[handle]);\r\n        previewImgElement.style.filter = filterValue;\r\n    }\r\n}\r\n\r\nconst onEffectsRadioChange = (evt) => {\r\n    if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)) {\r\n        return;\r\n    }\r\n\r\n    const effectName = evt.target.getAttribute('id').split('-')[1];\r\n    const effect = EFFECTS.find(effect => effect.name === effectName);\r\n\r\n    previewImgElement.setAttribute('class', '');\r\n    previewImgElement.classList.add('class', `effects__preview--${effectName}`);\r\n\r\n    if (effect.name !== NONE_EFFECT_KEY) {\r\n        const options = {\r\n            range: {\r\n                min: effect.range_min,\r\n                max: effect.range_max\r\n            },\r\n            step: effect.step\r\n        };\r\n        effectLevelElement.classList.remove('hidden');\r\n        effectLevelSliderElement.noUiSlider.updateOptions(options);\r\n        effectLevelSliderElement.noUiSlider.set(effect.start);\r\n    } else {\r\n        effectLevelElement.classList.add('hidden');\r\n        effectLevelValueElement.setAttribute('value', '');\r\n        previewImgElement.style.filter = 'unset';\r\n    }\r\n}\r\n\r\nexport {\r\n    onEffectsRadioChange,\r\n    onSliderUpdate\r\n};\r\n","import {openPreviewModal} from \"./preview-modal.js\";\r\n\r\nconst pictureListElement = document.querySelector('.pictures');\r\nconst pictureTemplate = document.getElementById('picture')\r\n    .content\r\n    .querySelector('.picture');\r\n\r\nconst renderPicturesList = (pictures) => {\r\n    for (const {id, url, likes, comments} of pictures) {\r\n        const pictureElement = pictureTemplate.cloneNode(true);\r\n\r\n        pictureElement.dataset.id = id;\r\n        pictureElement.querySelector('.picture__img').setAttribute('src', `http://localhost:80/uploads/pictures/${url}`);\r\n        pictureElement.querySelector('.picture__likes').textContent = likes;\r\n        pictureElement.querySelector('.picture__comments').textContent = comments.length;\r\n        pictureListElement.append(pictureElement);\r\n    }\r\n\r\n    pictureListElement.addEventListener('click', (evt) => {\r\n        const pictureElement = evt.target.closest('.picture');\r\n        if (pictureElement) {\r\n            const picture = pictures.find(picture => picture.id === +pictureElement.dataset.id);\r\n            openPreviewModal(picture);\r\n        }\r\n    });\r\n}\r\n\r\nexport {renderPicturesList};\r\n","import {renderCommentList} from './comment-list.js';\r\n\r\nconst previewModalElement = document.querySelector('.big-picture');\r\nconst previewModalCloseElement = document.getElementById('picture-cancel')\r\nconst previewModalImgElement = previewModalElement.querySelector('.big-picture__img img');\r\nconst previewModalLikesElement = previewModalElement.querySelector('.likes-count');\r\nconst totalCommentCountElement = previewModalElement.querySelector('.comments-count');\r\nconst previewModalDescElement = previewModalElement.querySelector('.social__caption');\r\n\r\nconst onModalEscKeydown = (evt) => {\r\n    if (evt.code === 'Escape') {\r\n        closePreviewModal();\r\n    }\r\n};\r\n\r\nconst openPreviewModal = (picture) => {\r\n    previewModalImgElement.setAttribute('src', `http://localhost:80/uploads/pictures/${picture.url}`);\r\n    previewModalLikesElement.textContent = picture.likes;\r\n    totalCommentCountElement.textContent = picture.comments.length;\r\n    previewModalDescElement.textContent = picture.description;\r\n    renderCommentList(picture.comments);\r\n\r\n    previewModalElement.classList.remove('hidden');\r\n\r\n    previewModalCloseElement.addEventListener('click', closePreviewModal)\r\n    document.addEventListener('keydown', onModalEscKeydown);\r\n};\r\n\r\nconst closePreviewModal = () => {\r\n    previewModalElement.classList.add('hidden');\r\n    previewModalCloseElement.removeEventListener('click', closePreviewModal);\r\n    document.removeEventListener('keydown', onModalEscKeydown);\r\n}\r\n\r\nexport {openPreviewModal};\r\n","import {updatePageHeader} from './user/page-header.js';\r\nimport {getData} from './api.js';\r\nimport {Url, AppStorage} from './const.js';\r\n\r\nconst start = () => {\r\n    updatePageHeader();\r\n    getData(Url.EFFECT.GET, (response) => {\r\n        const data = JSON.parse(response);\r\n        localStorage.setItem(AppStorage.EFFECTS, JSON.stringify(data));\r\n    });\r\n}\r\n\r\nconst restart = () => {\r\n\r\n}\r\n\r\nexport {start,restart};\r\n","import {VALIDATION_ERROR_KEYS, VALIDATORS} from './validation.js';\r\nimport {blockButton, unblockButton} from './user/util.js';\r\nimport {sendData} from './api.js';\r\nimport {AppStorage, Url} from './const.js';\r\n\r\nconst MAX_DESCRIPTION_LENGTH = 400;\r\nconst uploadFormElement = document.querySelector('#upload-select-image');\r\nconst submitBtnElement = uploadFormElement.querySelector('[type=submit]');\r\n\r\n/**\r\n * Обработчик события INPUT к полю описания публикации\r\n * @param {InputEvent} evt Объект события\r\n * @return {undefined}\r\n */\r\nconst onDescTextareaInput = (evt) => {\r\n    console.log(evt);\r\n    const valueLength = evt.target.value.length;\r\n    let error = '';\r\n\r\n    if (valueLength > MAX_DESCRIPTION_LENGTH) {\r\n        error = `Удалите лишние ${valueLength - MAX_DESCRIPTION_LENGTH} симв.`;\r\n    }\r\n\r\n    evt.target.setCustomValidity(error);\r\n    evt.target.reportValidity();\r\n};\r\n\r\nconst onHashtagsInput = (evt) => {\r\n    const errors = new Set();\r\n    const uniqueHashtags = new Set();\r\n\r\n    const errorAddition = {};\r\n    errorAddition[VALIDATION_ERROR_KEYS[3]] = null;\r\n    errorAddition[VALIDATION_ERROR_KEYS[5]] = null;\r\n\r\n    for (const hashtag of evt.target.value.split(' ')) {\r\n        if (hashtag === '') {\r\n            continue;\r\n        }\r\n\r\n        for (const validator of VALIDATORS) {\r\n            const args = [hashtag, uniqueHashtags, errorAddition];\r\n            if (validator.callback.apply(validator, args)) {\r\n                errors.add(validator.error);\r\n            }\r\n        }\r\n    }\r\n\r\n    const resultErrors = [];\r\n\r\n    for (const error of errors) {\r\n        if ([VALIDATION_ERROR_KEYS[3], VALIDATION_ERROR_KEYS[5]].includes(error)) {\r\n            resultErrors.push(error + errorAddition[error])\r\n        } else {\r\n            resultErrors.push(error);\r\n        }\r\n    }\r\n\r\n    evt.target.setCustomValidity(resultErrors.join('\\n'));\r\n    evt.target.reportValidity();\r\n};\r\n\r\nconst setUploadFormSabmit = (onSuccess, onFail) => {\r\n    uploadFormElement.addEventListener('submit', (evt) => {\r\n        evt.preventDefault();\r\n\r\n        if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)) {\r\n            return;\r\n        }\r\n\r\n        const {user} = JSON.parse(localStorage.getItem(AppStorage.ACCESS_TOKEN));\r\n\r\n        const formData = new FormData(uploadFormElement);\r\n        formData.set('user_id', user.id);\r\n\r\n        blockButton(submitBtnElement, 'Публикация');\r\n        window.setTimeout(() => {\r\n            sendData(\r\n                Url.PICTURE.POST,\r\n                () => {\r\n                    unblockButton(submitBtnElement);\r\n                    onSuccess();\r\n                },\r\n                () => {},\r\n                formData\r\n            );\r\n            console.log(formData);\r\n        }, 2000);\r\n    })\r\n};\r\n\r\nexport {\r\n    onDescTextareaInput,\r\n    onHashtagsInput,\r\n    setUploadFormSabmit\r\n};\r\n","import {zoomPlus, zoomMinus} from './zoom.js';\r\nimport {onSliderUpdate, onEffectsRadioChange} from './effects.js';\r\nimport {onDescTextareaInput, onHashtagsInput} from './upload-form.js';\r\n\r\nconst uploadModalElement = document.querySelector('.img-upload__overlay');\r\nconst uploadModalOpenElement = document.getElementById('upload-file');\r\nconst uploadModalCloseElement = document.getElementById('upload-cancel');\r\nconst previewImgElement = uploadModalElement.querySelector('.img-upload__preview img');\r\nconst scaleControlBiggerElement = uploadModalElement.querySelector('.scale__control--bigger');\r\nconst scaleControlSmallerElement = uploadModalElement.querySelector('.scale__control--smaller');\r\nconst effectPreviewElements = document.getElementsByClassName('effects__item');\r\nconst effectListElement = document.querySelector('.effects__list');\r\nconst effectLevelSliderElement = document.querySelector('.effect-level__slider');\r\nconst hashtagsInput = uploadModalElement.querySelector('.text__hashtags');\r\nconst descriptionTextarea = uploadModalElement.querySelector('.text__description');\r\n\r\nconst onModalEscKeydown = (evt) => {\r\n    if (evt.code === 'Escape') {\r\n        closeUploadModal();\r\n    }\r\n};\r\n\r\nconst updateUploadPreview = (file) => {\r\n    const reader = new FileReader();\r\n\r\n    reader.addEventListener('load', () => {\r\n        previewImgElement.setAttribute('src', reader.result);\r\n        for (const previewElement of effectPreviewElements) {\r\n            previewElement.querySelector('.effects__preview').style.backgroundImage = `url(${reader.result})`;\r\n        }\r\n    });\r\n\r\n    reader.readAsDataURL(file);\r\n};\r\n\r\nconst handlers = [\r\n    {\r\n        element: uploadModalCloseElement,\r\n        event: 'click',\r\n        callback: closeUploadModal\r\n    },\r\n    {\r\n        element: document,\r\n        event: 'keydown',\r\n        callback: onModalEscKeydown\r\n    },\r\n    {\r\n        element: scaleControlBiggerElement,\r\n        event: 'click',\r\n        callback: zoomPlus\r\n    },\r\n    {\r\n        element: scaleControlSmallerElement,\r\n        event: 'click',\r\n        callback: zoomMinus\r\n    },\r\n    {\r\n        element: effectListElement,\r\n        event: 'change',\r\n        callback: onEffectsRadioChange\r\n    },\r\n    {\r\n        element: hashtagsInput,\r\n        event: 'input',\r\n        callback: onHashtagsInput\r\n    },\r\n    {\r\n        element: descriptionTextarea,\r\n        event: 'input',\r\n        callback: onDescTextareaInput\r\n    }\r\n];\r\n\r\nfunction openUploadModal(file) {\r\n    updateUploadPreview(file);\r\n    uploadModalElement.classList.remove('hidden');\r\n    document.body.classList.add('modal-open');\r\n\r\n    for (const {element, event, callback} of handlers) {\r\n        element.addEventListener(event, callback);\r\n    }\r\n\r\n    effectLevelSliderElement.noUiSlider.on('update', onSliderUpdate);\r\n};\r\n\r\nfunction closeUploadModal() {\r\n    uploadModalElement.classList.add('hidden');\r\n    document.body.classList.remove('modal-open');\r\n\r\n    for (const {element, event, callback} of handlers) {\r\n        element.removeEventListener(event, callback);\r\n    }\r\n\r\n    effectLevelSliderElement.noUiSlider.off('update');\r\n};\r\n\r\nuploadModalOpenElement.addEventListener('change', () => {\r\n    const file = uploadModalOpenElement.files[0];\r\n    openUploadModal(file);\r\n});\r\n\r\nexport {closeUploadModal};\r\n","// import {renderEffectsList} from '../effect-list.js';\r\nimport {createToken} from './user-api.js';\r\nimport {blockButton, unblockButton} from './util.js';\r\n\r\nconst loginFormElement = document.querySelector('#login-modal form');\r\nconst submitBtnElement = loginFormElement.querySelector('[type=submit]');\r\n\r\nconst setLoginFormSubmit = (onSuccess, onFail) => {\r\n    loginFormElement.addEventListener('submit', (evt) => {\r\n        evt.preventDefault();\r\n        const formData = new FormData(loginFormElement);\r\n\r\n        blockButton(submitBtnElement, 'Вход');\r\n        window.setTimeout(() => {\r\n            createToken(formData, onSuccess, (errors, LOGIN_FIELDS, loginFormElement) => {\r\n                onFail(errors, LOGIN_FIELDS, loginFormElement);\r\n                unblockButton(submitBtnElement);\r\n            });\r\n        }, 2000);\r\n    });\r\n\r\n    // renderEffectsList();\r\n}\r\n\r\nexport {setLoginFormSubmit};\r\n","const nameElement = document.querySelector('title');\r\nconst loginModalElement = document.getElementById('login-modal');\r\nconst loginModalOpenElement = document.getElementById('login-btn');\r\nconst loginModalCloseElement = loginModalElement.querySelector('.btn-close');\r\nconst modalBackdropTemplate = document.getElementById('modal-backdrop')\r\n    .content\r\n    .querySelector('.modal-backdrop');\r\n\r\nconst onModalEscKeydown = (evt) => {\r\n    if (evt.code === 'Escape') {\r\n        closeLoginModal();\r\n    }\r\n};\r\n\r\nconst openLoginModal = () => {\r\n    const modalBackdropElement = modalBackdropTemplate.cloneNode(true);\r\n    loginModalElement.insertAdjacentElement('afterend', modalBackdropElement);\r\n    loginModalElement.style.display = 'block';\r\n    window.setTimeout(() => {\r\n        loginModalElement.classList.add('show');\r\n        document.body.classList.add('modal-open');\r\n        nameElement.textContent = 'WebdotApp-1 | Вход';\r\n    \r\n        loginModalCloseElement.addEventListener('click', closeLoginModal);\r\n        document.addEventListener('keydown', onModalEscKeydown);\r\n    }, 0);\r\n}\r\n\r\nconst closeLoginModal = () => {\r\n    loginModalElement.classList.remove('show');\r\n    window.setTimeout(() => {\r\n        document.querySelectorAll('.modal-backdrop').forEach((bd) => bd.remove());\r\n        loginModalElement.style.display = 'none';\r\n        document.body.classList.remove('modal-open');\r\n        nameElement.textContent = 'WebdotApp-1';\r\n    \r\n        loginModalCloseElement.removeEventListener('click', closeLoginModal);\r\n        document.removeEventListener('keydown', onModalEscKeydown);\r\n    }, 1000)\r\n}\r\n\r\nloginModalOpenElement.addEventListener('click', (evt) => {\r\n    evt.preventDefault()\r\n    openLoginModal();\r\n});\r\n\r\nexport {closeLoginModal};","import {deleteToken} from './user-api.js';\r\nimport {blockButton, unblockButton} from './util.js';\r\nimport {AppStorage} from '../const.js';\r\n\r\nconst logoutBtnElement = document.getElementById('logout-btn');\r\n\r\nconst setLogoutBtnClick = (onSuccess) => {\r\n    logoutBtnElement.addEventListener('click', () => {\r\n        if (!localStorage.getItem(AppStorage.ACCESS_TOKEN)){\r\n            return;\r\n        }\r\n\r\n        const {token, id} = JSON.parse(localStorage.getItem(AppStorage.ACCESS_TOKEN));\r\n\r\n        blockButton(logoutBtnElement, 'Выход');\r\n        window.setTimeout(() => {\r\n            deleteToken(token, id, () => {\r\n                onSuccess();\r\n                unblockButton(logoutBtnElement);\r\n            });\r\n        }, 2000);\r\n    })\r\n}\r\n\r\nexport {setLogoutBtnClick};\r\n","import {renderValidationErrors} from './validation.js';\r\nimport {setSignupFormSubmit} from './signup-form.js';\r\nimport {setLoginFormSubmit} from './login-form.js';\r\nimport {closeSignupModal} from './signup-modal.js';\r\nimport {updatePageHeader} from './page-header.js';\r\nimport {closeLoginModal} from './login-modal.js';\r\nimport {setLogoutBtnClick} from './logout.js';\r\nimport {AppStorage} from '../const.js';\r\n\r\nsetLoginFormSubmit(\r\n    (token) => {\r\n        closeLoginModal();\r\n        localStorage.setItem(AppStorage.ACCESS_TOKEN, JSON.stringify(token));\r\n        updatePageHeader();\r\n    }, \r\n    renderValidationErrors\r\n);\r\n\r\nsetSignupFormSubmit(\r\n    closeSignupModal,\r\n    renderValidationErrors\r\n);\r\n\r\nsetLogoutBtnClick(() => {\r\n    localStorage.removeItem(AppStorage.ACCESS_TOKEN);\r\n    updatePageHeader();\r\n});\r\n","import {AppStorage, Url} from '../const.js';\r\n\r\nconst userAvatarElement = document.querySelector('.wd-user-avatar');\r\nconst userNameElement = document.getElementById('username');\r\n\r\nconst updatePageHeader = () => {\r\n    const accessToken = localStorage.getItem(AppStorage.ACCESS_TOKEN);\r\n    document.body.dataset.auth = Boolean(accessToken);\r\n\r\n    if (accessToken) {\r\n        const user = JSON.parse(accessToken).user;\r\n        userAvatarElement.src = Url.UPLOAD.AVATAR + user.avatar;\r\n        userNameElement.textContent = user.name;\r\n    }\r\n}\r\n\r\nexport {updatePageHeader};\r\n","import {createUser} from './user-api.js';\r\nimport {blockButton, unblockButton} from './util.js';\r\n\r\nconst signupFormElement = document.querySelector('#signup-modal form');\r\nconst submitBtnElement = signupFormElement.querySelector('[type=submit]');\r\n\r\nconst setSignupFormSubmit = (onSuccess, onFail) => {\r\n    signupFormElement.addEventListener('submit', (evt) => {\r\n        evt.preventDefault();\r\n        const formData = new FormData(signupFormElement);\r\n\r\n        blockButton(submitBtnElement, 'Регистрация');\r\n        window.setTimeout(() => {\r\n            createUser(formData, onSuccess, (errors, SIGNUP_FIELDS, signupFormElement) => {\r\n                onFail(errors, SIGNUP_FIELDS, signupFormElement);\r\n                unblockButton(submitBtnElement);\r\n            });\r\n        }, 2000);\r\n    });\r\n}\r\n\r\nexport {setSignupFormSubmit};\r\n","const nameElement = document.querySelector('title');\r\nconst signupModalElement = document.getElementById('signup-modal');\r\nconst signupModalOpenElement = document.getElementById('signup-btn');\r\nconst signupModalCloseElement = signupModalElement.querySelector('.btn-close');\r\nconst modalBackdropTemplate = document.getElementById('modal-backdrop')\r\n    .content\r\n    .querySelector('.modal-backdrop');\r\n\r\nconst onModalEscKeydown = (evt) => {\r\n    if (evt.code === 'Escape') {\r\n        closeSignupModal();\r\n    }\r\n};\r\n\r\nconst openSignupModal = () => {\r\n    const modalBackdropElement = modalBackdropTemplate.cloneNode(true);\r\n    signupModalElement.insertAdjacentElement('afterend', modalBackdropElement);\r\n    signupModalElement.style.display = 'block';\r\n    window.setTimeout(() => {\r\n        signupModalElement.classList.add('show');\r\n        document.body.classList.add('modal-open');\r\n        nameElement.textContent = 'WebdotApp-1 | Регистрация';\r\n    \r\n        signupModalCloseElement.addEventListener('click', closeSignupModal);\r\n        document.addEventListener('keydown', onModalEscKeydown);\r\n    }, 0);\r\n}\r\n\r\nconst closeSignupModal = () => {\r\n    signupModalElement.classList.remove('show');\r\n    window.setTimeout(() => {\r\n        document.querySelectorAll('.modal-backdrop').forEach((bd) => bd.remove());\r\n        signupModalElement.style.display = 'none';\r\n        document.body.classList.remove('modal-open');\r\n        nameElement.textContent = 'WebdotApp-1';\r\n    \r\n        signupModalCloseElement.removeEventListener('click', closeSignupModal);\r\n        document.removeEventListener('keydown', onModalEscKeydown);\r\n    }, 1000)\r\n}\r\n\r\nsignupModalOpenElement.addEventListener('click', (evt) => {\r\n    evt.preventDefault()\r\n    openSignupModal();\r\n});\r\n\r\nexport {closeSignupModal};","import {Url} from '../const.js';\r\n\r\nconst signupFormElement = document.querySelector('#signup-modal form');\r\nconst loginFormElement = document.querySelector('#login-modal form');\r\n\r\nconst SIGNUP_FIELDS = ['email', 'password_hash', 'username', 'avatar'];\r\nconst LOGIN_FIELDS = ['email', 'password'];\r\n\r\nconst createUser = (body, onSuccess, onFail) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', Url.USER.POST);\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if (xhr.status === 201) {\r\n            onSuccess();\r\n        } else {\r\n            const errors = JSON.parse(xhr.response);\r\n            onFail(errors, SIGNUP_FIELDS, signupFormElement);\r\n        }\r\n    });\r\n\r\n    xhr.send(body);\r\n}\r\n\r\nconst createToken = (body, onSuccess, onFail) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('POST', Url.ACCESS_TOKEN.POST);\r\n\r\n    xhr.addEventListener('load', () => {\r\n        if (xhr.status === 201) {\r\n            const token = JSON.parse(xhr.response);\r\n            onSuccess(token);\r\n        } else {\r\n            const errors = [];\r\n            const response = JSON.parse(xhr.getResponseHeader('Errors'));\r\n\r\n            for (const key in response) {\r\n                errors.push({\r\n                    field: key,\r\n                    message: response[key][0]\r\n                });\r\n            }\r\n\r\n            onFail(errors, LOGIN_FIELDS, loginFormElement);\r\n        }\r\n    })\r\n\r\n    xhr.send(body);\r\n}\r\n\r\nconst deleteToken = (token, tokenId, onSuccess) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('DELETE', `${Url.ACCESS_TOKEN.DELETE}${tokenId}`);\r\n    xhr.setRequestHeader('Authorization', `Basic ${btoa(token + ':')}`);\r\n\r\n    // FIXME:\r\n    if (xhr.status === 0) { \r\n        onSuccess();\r\n    }\r\n\r\n    xhr.send();\r\n}\r\n\r\nexport {\r\n    createUser,\r\n    createToken,\r\n    deleteToken\r\n};\r\n","const spinnerTemplate = document.getElementById('spinner')\r\n    .content\r\n    .querySelector('.spinner-border');\r\n\r\nconst blockButton = (buttonElement, text) => {\r\n    blockButton.oldText = buttonElement.innerText;\r\n    const spinnerElement = spinnerTemplate.cloneNode(true);\r\n    buttonElement.setAttribute('disabled', '');\r\n    buttonElement.style.cursor = 'not-allowed';\r\n\r\n    buttonElement.innerHTML = '';\r\n    buttonElement.insertAdjacentElement('beforeend', spinnerElement);\r\n    buttonElement.insertAdjacentText('beforeend', `${text}...`);\r\n};\r\n\r\nconst unblockButton = (buttonElement) => {\r\n    buttonElement.innerHTML = blockButton.oldText;\r\n    buttonElement.removeAttribute('disabled');\r\n    buttonElement.style.cursor = 'pointer';\r\n};\r\n\r\nexport {blockButton, unblockButton};\r\n","const clearValidationErrors = (formElement) => {\r\n    for (const inputElement of formElement.querySelectorAll('input')) {\r\n        inputElement.classList.remove('is-invalid');\r\n        inputElement.nextElementSibling.textContent = '';\r\n    }\r\n};\r\n\r\nconst renderValidationErrors = (errors, fields, formElement) => {\r\n    clearValidationErrors(formElement);\r\n\r\n    for (const error of errors) {\r\n        if (fields.includes(error.field)) {\r\n            const inputElement = formElement.querySelector(`[name=${error.field}]`);\r\n            inputElement.classList.add('is-invalid');\r\n            inputElement.nextElementSibling.textContent = error.message;\r\n        }\r\n    }\r\n};\r\n\r\nexport {renderValidationErrors};\r\n","const MAX_HASHTAG_LENGTH = 20;\r\nconst MAX_HASHTAG_COUNT = 5;\r\n\r\nconst VALIDATION_ERROR_KEYS = [\r\n    'Хэштег должен начинаться c символа \"#\".',\r\n    'Строка после решётки, должна состоять только из букв и чисел.',\r\n    'Хэштег не может состоять только из одной решётки.',\r\n    `Максимальная длина хэштега - ${MAX_HASHTAG_LENGTH} символов (включая решётку).`,\r\n    'Один и тот же хэштег, не может быть использован дважды.',\r\n    'Нельзя указать больше пяти хэштегов.'\r\n];\r\n\r\nconst VALIDATORS = [\r\n    {\r\n        callback: (hashtag) => hashtag[0] !== '#',\r\n        error: VALIDATION_ERROR_KEYS[0],\r\n    },\r\n    {\r\n        callback: (hashtag) => hashtag.length > 1 && !/^#[A-Za-zА-Яа-я0-9]{1,19}$/.test(hashtag),\r\n        error: VALIDATION_ERROR_KEYS[1],\r\n    },\r\n    {\r\n        callback: (hashtag) => hashtag === '#',\r\n        error: VALIDATION_ERROR_KEYS[2],\r\n    },\r\n    {\r\n        callback: function (hashtag, uniqueHashtags, errorAddition) {\r\n            if (hashtag.length > MAX_HASHTAG_LENGTH) {\r\n                const message = ` Удалите лишние ${hashtag.length - MAX_HASHTAG_LENGTH} симв.`;\r\n                errorAddition[this.error] = message;\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        error: VALIDATION_ERROR_KEYS[3], \r\n    },\r\n    {\r\n        callback: function (hashtag, uniqueHashtags, errorAddition) {\r\n            const isNotUnique = uniqueHashtags.has(hashtag.toLowerCase());\r\n            uniqueHashtags.add(hashtag.toLowerCase());\r\n            return isNotUnique;\r\n        },\r\n        error: VALIDATION_ERROR_KEYS[4],\r\n    },\r\n    {\r\n        callback: function (hashtag, uniqueHashtags, errorAddition) {\r\n            if (uniqueHashtags.size > MAX_HASHTAG_COUNT) {\r\n                const message = ` Удалите лишние ${uniqueHashtags.size - MAX_HASHTAG_COUNT} хешт.`;\r\n                errorAddition[this.error] = message;\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        error: VALIDATION_ERROR_KEYS[5],\r\n    },\r\n]\r\n\r\nexport {\r\n    VALIDATION_ERROR_KEYS,\r\n    VALIDATORS\r\n};\r\n","const uploadModalElement = document.querySelector('.img-upload__overlay');\r\nconst scaleControlValueElement = uploadModalElement.querySelector('.scale__control--value');\r\nconst scaleControlBiggerElement = uploadModalElement.querySelector('.scale__control--bigger');\r\nconst scaleControlSmallerElement = uploadModalElement.querySelector('.scale__control--smaller');\r\nconst previewImgElement = uploadModalElement.querySelector('.img-upload__preview img');\r\n\r\nconst SCALE_CONTROL_MAX_VALUE = 100;\r\nconst SCALE_CONTROL_MIN_VALUE = 25;\r\nconst SCALE_CONTROL_STEP = 25;\r\n\r\nconst isMaxValue = (value) => value === SCALE_CONTROL_MAX_VALUE;\r\nconst isMinValue = (value) => value === SCALE_CONTROL_MIN_VALUE;\r\n\r\nconst updateScaleControlElements = () => {\r\n    const value = Number(scaleControlValueElement.value.replace('%', ''));\r\n\r\n    scaleControlBiggerElement.style.cursor = isMaxValue(value)\r\n        ? 'not-allowed'\r\n        : 'pointer';\r\n    scaleControlSmallerElement.style.cursor = isMinValue(value)\r\n        ? 'not-allowed'\r\n        : 'pointer';\r\n}\r\n\r\nconst zoomPlus = () => {\r\n    const value = Number(scaleControlValueElement.value.replace('%', ''));\r\n    if (value < SCALE_CONTROL_MAX_VALUE) {\r\n        const newValue = value + SCALE_CONTROL_STEP;\r\n        scaleControlValueElement.value = newValue + '%';\r\n        previewImgElement.style.transform = `scale(${newValue / 100})`;\r\n        updateScaleControlElements();\r\n    }\r\n};\r\n\r\nconst zoomMinus = () => {\r\n    const value = Number(scaleControlValueElement.value.replace('%', ''));\r\n    if (value > SCALE_CONTROL_MIN_VALUE) {\r\n        const newValue = value - SCALE_CONTROL_STEP;\r\n        scaleControlValueElement.value = newValue + '%';\r\n        previewImgElement.style.transform = `scale(${newValue / 100})`;\r\n        updateScaleControlElements();\r\n    }\r\n};\r\n\r\nexport {zoomPlus, zoomMinus};\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {renderPicturesList} from './picture-list.js';\r\nimport {setCommentFormSabmit} from './comment-form.js';\r\nimport {closeUploadModal} from './upload-modal.js';\r\nimport {renderEffectsList} from './effect-list.js';\r\nimport {setUploadFormSabmit} from './upload-form.js';\r\nimport {Url} from './const.js';\r\nimport {start, restart} from './start.js';\r\nimport './upload-modal.js';\r\nimport './user/main.js';\r\nimport {getData} from './api.js';\r\n\r\nstart();\r\n\r\ngetData(Url.PICTURE.GET, (response) => {\r\n    const pictures = JSON.parse(response);\r\n    renderPicturesList(pictures);\r\n});\r\n\r\nrenderEffectsList();\r\n\r\nsetUploadFormSabmit(\r\n    () => {\r\n        closeUploadModal();\r\n        // restart();\r\n});\r\n\r\nsetCommentFormSabmit(() => {});\r\n"],"names":[],"sourceRoot":""}